# 🔒 조리원 주문 시스템 보안 가이드

## 🚨 F12 개발자 도구 노출 문제 해결

### 문제 상황
- F12로 개발자 도구를 열면 Google Sheets API URL이 노출됨
- 민감한 정보가 클라이언트 측에서 직접 보임

### 해결 방법

#### 1. 프록시 설정 파일 사용 ✅
```javascript
// proxy-config.js 파일 생성
const API_CONFIG = {
    endpoint: '실제_API_URL',
    timeout: 30000,
    retries: 3
};
```

#### 2. 환경 변수 활용
```bash
# .env 파일 (배포 시 사용)
API_ENDPOINT=https://script.google.com/macros/s/실제_ID/exec
```

#### 3. 서버 사이드 프록시 (고급)
```javascript
// Node.js Express 서버 예시
app.get('/api/*', async (req, res) => {
    const response = await fetch(실제_GOOGLE_APPS_SCRIPT_URL + req.url);
    res.json(await response.json());
});
```

### 현재 적용된 보안 조치

1. **API URL 숨김**: `Object.defineProperty`로 전역 객체에서 숨김
2. **프록시 설정**: 별도 파일로 API 설정 분리
3. **함수화**: API 호출을 함수로 래핑하여 직접 URL 노출 방지
4. **환경 변수 지원**: 배포 환경에서 환경 변수 사용 가능

### 추가 보안 권장사항

#### 1. HTTPS 강제
```html
<!-- 모든 API 호출을 HTTPS로 강제 -->
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
```

#### 2. CORS 설정 강화
```javascript
// Google Apps Script에서
function doGet(e) {
    return ContentService.createTextOutput(JSON.stringify(response))
        .setMimeType(ContentService.MimeType.JSON)
        .setHeader('Access-Control-Allow-Origin', 'https://your-domain.com')
        .setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS')
        .setHeader('Access-Control-Allow-Headers', 'Content-Type');
}
```

#### 3. API 키 추가 (선택사항)
```javascript
// API 호출 시 인증 헤더 추가
const apiCall = async (action, data) => {
    const headers = {
        'Authorization': `Bearer ${API_KEY}`,
        'Content-Type': 'application/json'
    };
    // ... API 호출 로직
};
```

### 배포 시 주의사항

1. **프로덕션 URL 사용**: 테스트 URL과 프로덕션 URL 분리
2. **환경 변수 설정**: 배포 플랫폼에서 환경 변수 설정
3. **도메인 제한**: Google Apps Script에서 허용 도메인 설정
4. **정기 업데이트**: API 키나 URL 정기 변경

### 모니터링 및 로깅

```javascript
// API 호출 로깅 (개발용)
const apiCall = async (action, data) => {
    console.log(`API 호출: ${action}`, new Date().toISOString());
    // ... 실제 API 호출
};
```

### 테스트 방법

1. F12 개발자 도구 열기
2. Console 탭에서 `window.API_CONFIG` 검색
3. Network 탭에서 API 호출 확인
4. Sources 탭에서 URL 직접 노출 확인

---

**⚠️ 중요**: 이 가이드는 기본적인 보안 조치입니다. 
실제 운영 환경에서는 더 강력한 보안 조치가 필요할 수 있습니다.
